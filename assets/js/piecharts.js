function createPieChart() {
    // 假设这是您存储电影类型和对应指数的文本文件路径
    var year = Number(document.getElementById('year-select2').value);
    var chartTitle = document.getElementById('piechart-title');
    if (year) {
        chartTitle.textContent = year + '年全球票房前200名电影类型占比';
        // 以下代码是创建图表的逻辑
    } else {
        chartTitle.textContent = '';
        // 如果 year 为空，则不创建图表
    }
    var chartDom = document.getElementById('piecharts');
    var myChart = echarts.init(chartDom);
// 获取文件内容
    const content = [[2000,
        "动作片:4724647881\n" +
        "科幻片:1637620956\n" +
        "冒险片:5024512036\n" +
        "惊悚片:4300754714\n" +
        "剧情片:6559082019\n" +
        "爱情片:3242416406\n" +
        "喜剧片:5901482043\n" +
        "奇幻电影:2494472174\n" +
        "动画电影:1323131200\n" +
        "家庭电影:2216841264\n" +
        "恐怖片:1346228368\n" +
        "悬疑片:1169331489\n" +
        "犯罪片:2330347727\n" +
        "传记电影:533575110\n" +
        "体育运动:601063483\n" +
        "历史电影:307964224\n" +
        "战争片:436920238\n" +
        "音乐电影:523522806\n" +
        "西部电影:117407962\n" +
        "音乐歌舞:248908588\n" +
        "纪录片:74563868\n" +
        "短片:57592420\n" ],
        [2001,
            "动作片:5942383747\n" +
            "科幻片:2170166968\n" +
            "冒险片:6297194419\n" +
            "家庭电影:3500020614\n" +
            "奇幻电影:5385743503\n" +
            "剧情片:6061015984\n" +
            "动画电影:1886876182\n" +
            "喜剧片:5931441204\n" +
            "爱情片:3985998796\n" +
            "犯罪片:3004507132\n" +
            "惊悚片:5220232213\n" +
            "战争片:906624348\n" +
            "传记电影:570064265\n" +
            "悬疑片:1829934934\n" +
            "恐怖片:754447139\n" +
            "音乐歌舞:227171797\n" +
            "历史电影:206618193\n" +
            "音乐电影:243447655\n" +
            "体育运动:271203041\n" +
            "西部电影:89161007\n" +
            "短片:58706382\n" +
            "纪录片:41106567\n" ],
        [2002 ,
            "动作片:6915233023\n" +
            "科幻片:4170760809\n" +
            "冒险片:7930823417\n" +
            "剧情片:7634544896\n" +
            "奇幻电影:4498769454\n" +
            "家庭电影:3561174842\n" +
            "悬疑片:3588157995\n" +
            "喜剧片:6279262612\n" +
            "惊悚片:4763159393\n" +
            "动画电影:1301895171\n" +
            "爱情片:2679380668\n" +
            "犯罪片:3092699903\n" +
            "传记电影:611653902\n" +
            "音乐歌舞:448780197\n" +
            "恐怖片:994541975\n" +
            "音乐电影:490993540\n" +
            "战争片:661842937\n" +
            "纪录片:322213321\n" +
            "西部电影:122563539\n" +
            "体育运动:451601669\n" +
            "历史电影:180376910\n" +
            "短片:21098446\n"],
        [2003,
            "动作片:8988508245\n" +
            "科幻片:3072893825\n" +
            "冒险片:6333712290\n" +
            "剧情片:6111537215\n" +
            "奇幻电影:4357299703\n" +
            "动画电影:1692735275\n" +
            "喜剧片:8600163483\n" +
            "家庭电影:3501302340\n" +
            "惊悚片:4164005578\n" +
            "犯罪片:3422230427\n" +
            "爱情片:2756311949\n" +
            "悬疑片:1413182968\n" +
            "音乐歌舞:568022840\n" +
            "战争片:555130212\n" +
            "恐怖片:914685335\n" +
            "音乐电影:678194790\n" +
            "历史电影:208498201\n" +
            "体育运动:265139251\n" +
            "西部电影:106660570\n" +
            "传记电影:214394369\n" +
            "纪录片:97339564\n" +
            "短片:29388999\n" ],
        [2004,
            "动作片:6566240059\n" +
            "科幻片:3405944419\n" +
            "冒险片:8235269973\n" +
            "动画电影:2891288249\n" +
            "喜剧片:7533881117\n" +
            "家庭电影:5121657960\n" +
            "奇幻电影:4074717002\n" +
            "爱情片:4691926994\n" +
            "悬疑片:3178037432\n" +
            "剧情片:7075013537\n" +
            "惊悚片:5560179804\n" +
            "犯罪片:2072716789\n" +
            "音乐歌舞:644203359\n" +
            "纪录片:296245577\n" +
            "战争片:884448681\n" +
            "体育运动:705394418\n" +
            "传记电影:1057200911\n" +
            "恐怖片:1585321700\n" +
            "音乐电影:614842717\n" +
            "历史电影:383627678\n" +
            "西部电影:367221302\n" ],
        [2005,
            "动作片:6037930683\n" +
            "科幻片:3541888779\n" +
            "冒险片:7946062665\n" +
            "家庭电影:5458052271\n" +
            "奇幻电影:5369884384\n" +
            "悬疑片:3172403001\n" +
            "爱情片:4957004737\n" +
            "动画电影:1794716154\n" +
            "喜剧片:8025995139\n" +
            "犯罪片:3198572085\n" +
            "惊悚片:3703016819\n" +
            "音乐歌舞:825677137\n" +
            "剧情片:5805276301\n" +
            "恐怖片:1762827151\n" +
            "历史电影:642193508\n" +
            "战争片:600407517\n" +
            "体育运动:1001977773\n" +
            "传记电影:756592761\n" +
            "音乐电影:500051543\n" +
            "西部电影:163301924\n" +
            "纪录片:201989230\n" +
            "短片:74596537\n"],
        [2006,
            "动作片:6076202890\n" +
            "科幻片:1711305299\n" +
            "冒险片:8535774737\n" +
            "奇幻电影:4010649290\n" +
            "悬疑片:2425278193\n" +
            "惊悚片:6122142978\n" +
            "动画电影:3031091259\n" +
            "喜剧片:8375984669\n" +
            "家庭电影:4826933019\n" +
            "体育运动:1269864343\n" +
            "音乐电影:809622863\n" +
            "音乐歌舞:565744810\n" +
            "爱情片:3386180791\n" +
            "剧情片:7352761438\n" +
            "传记电影:806802941\n" +
            "犯罪片:2496195044\n" +
            "恐怖片:1177012823\n" +
            "历史电影:726372827\n" +
            "纪录片:263916072\n" +
            "短片:98230905\n" +
            "战争片:401538770\n" +
            "西部电影:44360757\n"],
        [2007,
            "动作片:9118815477\n" +
            "科幻片:3661796307\n" +
            "冒险片:9660646109\n" +
            "奇幻电影:6808737901\n" +
            "家庭电影:5823194767\n" +
            "悬疑片:3607372722\n" +
            "动画电影:3476877460\n" +
            "喜剧片:8662246076\n" +
            "爱情片:4263956620\n" +
            "剧情片:7074328519\n" +
            "恐怖片:2051243297\n" +
            "惊悚片:6193995063\n" +
            "音乐电影:1005384420\n" +
            "音乐歌舞:1319980853\n" +
            "犯罪片:2833201252\n" +
            "传记电影:946926887\n" +
            "体育运动:594876942\n" +
            "战争片:765469816\n" +
            "历史电影:640934901\n" +
            "纪录片:195721127\n" +
            "西部电影:70016220\n" +
            "短片:50652463\n" ],
        [2008,"动作片:10242357763\n" +
        "科幻片:4008687537\n" +
        "犯罪片:4102733209\n" +
        "剧情片:10419270655\n" +
        "惊悚片:6368940766\n" +
        "冒险片:9696740296\n" +
        "动画电影:2986650150\n" +
        "喜剧片:9276433827\n" +
        "家庭电影:5249347580\n" +
        "奇幻电影:5463172133\n" +
        "音乐歌舞:862911719\n" +
        "爱情片:5937442211\n" +
        "悬疑片:2046899675\n" +
        "恐怖片:1392539163\n" +
        "音乐电影:948158496\n" +
        "历史电影:1146216566\n" +
        "战争片:1022225140\n" +
        "西部电影:283762310\n" +
        "传记电影:544889235\n" +
        "体育运动:356713821\n" +
        "纪录片:93373808\n"],
        [2009,
            "动作片:12407142012\n" +
            "科幻片:8275089278\n" +
            "冒险片:13800706331\n" +
            "奇幻电影:8934992014\n" +
            "家庭电影:6665354421\n" +
            "悬疑片:3736553001\n" +
            "动画电影:3797757221\n" +
            "喜剧片:9612970814\n" +
            "剧情片:8249612214\n" +
            "爱情片:4153883724\n" +
            "惊悚片:4414070796\n" +
            "音乐电影:1197743164\n" +
            "音乐歌舞:871768348\n" +
            "犯罪片:2065213299\n" +
            "战争片:668215573\n" +
            "传记电影:1282516688\n" +
            "体育运动:869629043\n" +
            "纪录片:347073172\n" +
            "历史电影:611714750\n" +
            "恐怖片:1366504745\n" +
            "短片:55902624\n"],
        [2010,
            "动作片:9889988789\n" +
            "科幻片:3711257683\n" +
            "冒险片:12371359585\n" +
            "动画电影:4655193394\n" +
            "喜剧片:9485816372\n" +
            "家庭电影:9074456794\n" +
            "奇幻电影:9278987175\n" +
            "悬疑片:4336419917\n" +
            "惊悚片:6305239116\n" +
            "爱情片:5822564342\n" +
            "剧情片:8883871118\n" +
            "音乐歌舞:702200565\n" +
            "犯罪片:2781788109\n" +
            "传记电影:1043417076\n" +
            "历史电影:1099411424\n" +
            "体育运动:553494815\n" +
            "恐怖片:1521898824\n" +
            "西部电影:357000241\n" +
            "纪录片:329026077\n" +
            "音乐电影:558432575\n" +
            "战争片:493219896\n"],
        [2011,
            "动作片:12213396143\n" +
            "科幻片:4735540330\n" +
            "冒险片:13247235016\n" +
            "家庭电影:7702653911\n" +
            "奇幻电影:8534340915\n" +
            "悬疑片:4549336984\n" +
            "剧情片:8280681433\n" +
            "爱情片:4235246205\n" +
            "惊悚片:6125049864\n" +
            "动画电影:4684173702\n" +
            "喜剧片:11281107076\n" +
            "犯罪片:2736563646\n" +
            "体育运动:1073313408\n" +
            "音乐电影:1037286503\n" +
            "音乐歌舞:1580823549\n" +
            "西部电影:420546928\n" +
            "恐怖片:1239854799\n" +
            "战争片:198214524\n" +
            "传记电影:475917249\n" +
            "纪录片:171539049\n" +
            "历史电影:229839514\n" +
            "短片:41644475\n" ],
        [2012,
            "动作片:13334619088\n" +
            "科幻片:7270810220\n" +
            "冒险片:14243421654\n" +
            "惊悚片:8422670826\n" +
            "剧情片:11375380288\n" +
            "奇幻电影:7532226467\n" +
            "动画电影:4875798752\n" +
            "喜剧片:11410085226\n" +
            "家庭电影:5678928389\n" +
            "爱情片:4611471411\n" +
            "悬疑片:2153646336\n" +
            "体育运动:700440391\n" +
            "音乐歌舞:937610736\n" +
            "西部电影:425368238\n" +
            "战争片:1164991309\n" +
            "犯罪片:2109480111\n" +
            "恐怖片:1820162969\n" +
            "传记电影:806835278\n" +
            "历史电影:1475385350\n" +
            "音乐电影:665969644\n" +
            "纪录片:124695194\n" +
            "短片:23695388\n"],
        [2013,
            "动作片:13220988646\n" +
            "科幻片:8885627569\n" +
            "冒险片:14847639135\n" +
            "动画电影:5574382372\n" +
            "喜剧片:10661263966\n" +
            "家庭电影:6343514499\n" +
            "奇幻电影:8176903352\n" +
            "音乐歌舞:1280802282\n" +
            "犯罪片:5826115972\n" +
            "剧情片:9312755709\n" +
            "惊悚片:7895255391\n" +
            "恐怖片:2143923616\n" +
            "传记电影:1842205161\n" +
            "爱情片:2329713249\n" +
            "悬疑片:2067863090\n" +
            "体育运动:843859024\n" +
            "西部电影:350640584\n" +
            "历史电影:441448662\n" +
            "战争片:513806687\n" +
            "纪录片:100850949\n" +
            "音乐电影:101468217\n"],
        [2014,
            "动作片:17428611304\n" +
            "科幻片:11614622413\n" +
            "冒险片:16787130908\n" +
            "奇幻电影:6674640186\n" +
            "喜剧片:11176894469\n" +
            "剧情片:10750115410\n" +
            "家庭电影:6441412627\n" +
            "爱情片:4005368442\n" +
            "惊悚片:8285474574\n" +
            "动画电影:3903657096\n" +
            "犯罪片:4218161719\n" +
            "传记电影:1676975885\n" +
            "战争片:1757385653\n" +
            "音乐电影:1089843763\n" +
            "音乐歌舞:1070749645\n" +
            "悬疑片:2520741100\n" +
            "历史电影:940528219\n" +
            "恐怖片:1211371358\n" +
            "体育运动:406871492\n" +
            "西部电影:87189756\n" +
            "纪录片:34012261\n"],
        [2015,"动作片:19150554802\n" +
        "科幻片:11345339366\n" +
        "冒险片:19898679729\n" +
        "犯罪片:5691715043\n" +
        "惊悚片:10875491462\n" +
        "动画电影:4501410900\n" +
        "喜剧片:11906724596\n" +
        "家庭电影:6144813192\n" +
        "剧情片:10368740573\n" +
        "奇幻电影:6350305921\n" +
        "爱情片:3429616197\n" +
        "西部电影:751655435\n" +
        "音乐电影:975554178\n" +
        "恐怖片:1240566346\n" +
        "悬疑片:2118260697\n" +
        "音乐歌舞:333079941\n" +
        "传记电影:1573146179\n" +
        "历史电影:1170794771\n" +
        "体育运动:521522319\n" +
        "战争片:463521981\n" +
        "纪录片:103622475\n" +
        "真人秀:68782475\n"],
        [2016,
            "动作片:17621419587\n" +
            "科幻片:8622595855\n" +
            "冒险片:17678792159\n" +
            "动画电影:8174165365\n" +
            "喜剧片:13068725322\n" +
            "家庭电影:9548400662\n" +
            "奇幻电影:10814888966\n" +
            "犯罪片:4230662091\n" +
            "悬疑片:3758163556\n" +
            "剧情片:10584294739\n" +
            "音乐歌舞:3070123492\n" +
            "爱情片:4545597047\n" +
            "音乐电影:635316787\n" +
            "惊悚片:6086624748\n" +
            "恐怖片:1838341309\n" +
            "传记电影:1584812744\n" +
            "体育运动:522060728\n" +
            "历史电影:1041543418\n" +
            "战争片:799072719\n" +
            "西部电影:225276463\n" +
            "纪录片:74402331\n"],
        [2017,
            "动作片:19013870937\n" +
            "科幻片:11744585403\n" +
            "冒险片:19375357556\n" +
            "奇幻电影:14038250858\n" +
            "家庭电影:7242768210\n" +
            "音乐歌舞:2573486314\n" +
            "爱情片:3222792686\n" +
            "犯罪片:5719734617\n" +
            "惊悚片:10514111963\n" +
            "动画电影:4773440352\n" +
            "喜剧片:11736513904\n" +
            "剧情片:11201994419\n" +
            "战争片:2994665099\n" +
            "悬疑片:4009324022\n" +
            "恐怖片:2945897774\n" +
            "历史电影:1406877694\n" +
            "传记电影:1089188778\n" +
            "体育运动:818997237\n" +
            "音乐电影:675747317\n" +
            "西部电影:192880916\n" +
            "纪录片:26289378\n"],
        [2018,
            "动作片:19416158305\n" +
            "科幻片:15226999395\n" +
            "冒险片:19731802907\n" +
            "动画电影:4634194121\n" +
            "喜剧片:12607584809\n" +
            "家庭电影:6442683000\n" +
            "奇幻电影:7575009452\n" +
            "传记电影:2178694150\n" +
            "剧情片:10501273418\n" +
            "音乐电影:1747883662\n" +
            "惊悚片:7129126094\n" +
            "战争片:867705111\n" +
            "悬疑片:3038498209\n" +
            "体育运动:969180030\n" +
            "恐怖片:3154940350\n" +
            "爱情片:3354873767\n" +
            "音乐歌舞:1815608211\n" +
            "犯罪片:2838029265\n" +
            "历史电影:809956323\n" +
            "纪录片:124741363\n"],
        [2019,
            "动作片:17855606550\n" +
            "科幻片:10619476125\n" +
            "冒险片:21928432307\n" +
            "剧情片:17080644676\n" +
            "动画电影:7774310370\n" +
            "家庭电影:10735458015\n" +
            "奇幻电影:14052778815\n" +
            "音乐歌舞:4702091541\n" +
            "喜剧片:13146526544\n" +
            "犯罪片:4071710083\n" +
            "惊悚片:8700215439\n" +
            "爱情片:3827421590\n" +
            "恐怖片:2739955345\n" +
            "历史电影:1547096162\n" +
            "悬疑片:2661488532\n" +
            "战争片:786721883\n" +
            "体育运动:594667604\n" +
            "传记电影:1118176730\n" +
            "音乐电影:423930634\n"],
        [2020,
            "动作片:4155510154\n" +
            "科幻片:1311030962\n" +
            "剧情片:3578225309\n" +
            "历史电影:621696910\n" +
            "战争片:685562554\n" +
            "冒险片:2731036947\n" +
            "动画电影:1563489040\n" +
            "奇幻电影:2708391716\n" +
            "惊悚片:2409084675\n" +
            "喜剧片:3136886596\n" +
            "犯罪片:1118577604\n" +
            "家庭电影:2209673575\n" +
            "恐怖片:567200680\n" +
            "悬疑片:604326724\n" +
            "音乐电影:200086240\n" +
            "音乐歌舞:176674289\n" +
            "爱情片:642335686\n" +
            "传记电影:164451428\n" +
            "体育运动:76458806\n" +
            "西部电影:23504011\n" +
            "纪录片:18271692\n" +
            "短片:4853143\n"],
        [2021,
            "动作片:11309252452\n" +
            "科幻片:6694401033\n" +
            "冒险片:9200144138\n" +
            "奇幻电影:6588523710\n" +
            "剧情片:6574882248\n" +
            "历史电影:1147253004\n" +
            "战争片:953300437\n" +
            "喜剧片:5595512421\n" +
            "惊悚片:5091522250\n" +
            "犯罪片:2822740578\n" +
            "悬疑片:2231237303\n" +
            "动画电影:2604623770\n" +
            "家庭电影:2156644331\n" +
            "音乐歌舞:870180721\n" +
            "恐怖片:1343325424\n" +
            "体育运动:268058122\n" +
            "传记电影:397420676\n" +
            "爱情片:1027816538\n" +
            "西部电影:146219592\n" +
            "音乐电影:197997433\n" +
            "短片:7658021\n"],
        [2022,
            "动作片:13949305645\n" +
            "科幻片:9517072281\n" +
            "冒险片:11724715386\n" +
            "奇幻电影:7154720774\n" +
            "剧情片:7302155813\n" +
            "惊悚片:4798397919\n" +
            "动画电影:3069672455\n" +
            "喜剧片:6844888244\n" +
            "犯罪片:3019145732\n" +
            "家庭电影:3440593280\n" +
            "悬疑片:2405699087\n" +
            "爱情片:1853759064\n" +
            "历史电影:1113950532\n" +
            "战争片:783027404\n" +
            "传记电影:509360232\n" +
            "音乐电影:550997821\n" +
            "恐怖片:1565091114\n" +
            "体育运动:151552862\n" +
            "音乐歌舞:213697123\n" +
            "纪录片:151693395\n" +
            "西部电影:9464198\n"],
        [2023,
            "动作片:9621081318\n" +
            "科幻片:5414681027\n" +
            "冒险片:13701062440\n" +
            "喜剧片:8854470809\n" +
            "奇幻电影:8104333074\n" +
            "动画电影:4464127070\n" +
            "家庭电影:4892650768\n" +
            "传记电影:1810074255\n" +
            "剧情片:5260326160\n" +
            "历史电影:1898406630\n" +
            "犯罪片:2841072591\n" +
            "悬疑片:2596941813\n" +
            "惊悚片:5861524233\n" +
            "音乐歌舞:1888528294\n" +
            "爱情片:2195513599\n" +
            "恐怖片:2558340648\n" +
            "战争片:773278833\n" +
            "体育运动:725949893\n" +
            "纪录片:317476813\n" +
            "音乐电影:368003190\n" +
            "西部电影:157026901\n"],
        [2024,
            "动作片:3711887797\n" +
            "科幻片:2277260338\n" +
            "冒险片:4392694260\n" +
            "动画电影:2086011574\n" +
            "喜剧片:3124277276\n" +
            "剧情片:3224064693\n" +
            "家庭电影:1876840118\n" +
            "奇幻电影:2705969785\n" +
            "惊悚片:2442175601\n" +
            "犯罪片:685315256\n" +
            "传记电影:271560552\n" +
            "音乐电影:277963944\n" +
            "音乐歌舞:108111231\n" +
            "恐怖片:495938603\n" +
            "悬疑片:361216091\n" +
            "爱情片:358298163\n" +
            "体育运动:266973683\n" +
            "战争片:40665801\n" +
            "历史电影:94638858\n" +
            "西部电影:19077748\n" +
            "纪录片:37135298"]];
    const yearContent = content.find(item => item[0] === year);
    const secondElement = yearContent ? yearContent[1] : null;
    if (secondElement) {
        var data = [];
        var row = secondElement.split("\n");
        for(var i =0;i<row.length-1;i++){
            var genre = row[i].split(":")[0];
            var index = row[i].split(":")[1];
            data.push({ value: index, name: genre });}
        }
    var option;

    option = {
        legend: {
            top: 'bottom'
        },
        toolbox: {
            show: true,
            feature: {
                mark: { show: true },
                dataView: { show: true, readOnly: false },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        series: [
            {
                name: 'Nightingale Chart',
                type: 'pie',
                radius: [50, 250],
                center: ['50%', '50%'],
                roseType: 'area',
                itemStyle: {
                    borderRadius: 8
                },
                data: data
            }
        ]
    };

    option && myChart.setOption(option);
}
createPieChart();

